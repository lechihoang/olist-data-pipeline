name: geolocation
layer: silver
version: "1.0.0"
description: |
  Deduplicated geolocation data.
  Multiple entries per ZIP code are averaged.
  Each ZIP code prefix has exactly one row.

source:
  table: bronze.geolocation_raw

upstream:
  - bronze.geolocation_raw

columns:
  - name: geolocation_zip_code_prefix
    type: string
    nullable: false
    description: First 5 digits of ZIP code (deduplicated)
    tags: [primary_key]

  - name: geolocation_lat
    type: double
    nullable: true
    description: Latitude coordinate (averaged if multiple entries)

  - name: geolocation_lng
    type: double
    nullable: true
    description: Longitude coordinate (averaged if multiple entries)

  - name: geolocation_city
    type: string
    nullable: true
    description: City name

  - name: geolocation_state
    type: string
    nullable: true
    description: State code (2 letters)

metadata:
  owner: data-engineering
  created_at: "2024-01-01"
  updated_at: "2024-01-05"
